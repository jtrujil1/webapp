<html>
    <head>
        <meta name="google-signin-scope" content="profile email">
        <meta name="google-signin-code" content="loading.php">
        <meta name="google-signin-client_id" content="764009503051-2ii3ko9tqvj69aoielqgbv4a2tfgrfqm.apps.googleusercontent.com">
        <script src="https://apis.google.com/js/platform.js" async defer></script>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Questrial&display=swap");

            .container {
                display: flex;
                flex-direction: row;
                height: 100%;
            }

            .leftCont {
                width: 30%;
                display: flex;
                flex-direction: column;
                background-color: white;
            }

            .rightCont {
                width: 70%;
                background-color: #FCCA46;
            }

            img {
                display: block;
                margin-left: auto;
                margin-right: auto;
                margin-top: 50px;
                width: 450px;
            }

            .login {
                text-align: center;
                color: rgb(18, 17, 17);
                font-family: 'Questrial', sans-serif;
                font-size: 60px;
            }
            
            .tagline {
                display: block;
                margin-left: auto;
                margin-right: auto;
                width: 50%;
                text-align: center;
                color: white;
                font-family: 'Questrial', sans-serif;
                font-size: 30px;
            }

            .g-signin2 {
                margin-top: 55px;
                display: flex;
                width: 100%;
                justify-content: center;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="leftCont">
                <p class="login">Login</p>
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
                <!-- <a href="#" onclick="signOut();">Sign out</a> -->
            </div>
            <div class="rightCont">
                <img src="images/Foodscape.jpg">
                <div class="tagline">Cook with what you've got!</div>
            </div>
        </div>
        
        <script>
            function onSignIn(googleUser) {
                // Useful data for your client-side scripts:
                var profile = googleUser.getBasicProfile();
                console.log("ID: " + profile.getId()); // Don't send this directly to your server!
                console.log('Full Name: ' + profile.getName());
                console.log('Given Name: ' + profile.getGivenName());
                console.log('Family Name: ' + profile.getFamilyName());
                console.log("Image URL: " + profile.getImageUrl());
                console.log("Email: " + profile.getEmail());
        
                // The ID token you need to pass to your backend:
                var id_token = googleUser.getAuthResponse().id_token;
                console.log("ID Token: " + id_token);
                
                //   var inDB = checkUserInDB();
                document.cookie = "userId=" + profile.getId();
                document.cookie = "name=" + profile.getGivenName();
                document.cookie = "userImg=" + profile.getImageUrl();
                window.open("/loading.php","_self")
            }

            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                console.log('User signed out.');
                });
            }
          </script>
    </body>
</html>